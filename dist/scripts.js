let pokemonRepository=function(){let e=[],t=[{url:"https://pokeapi.co/api/v2/pokemon/?limit=151",gen:"I",offset:0},{url:"https://pokeapi.co/api/v2/pokemon/?offset=151&limit=100",gen:"II",offset:151},{url:"https://pokeapi.co/api/v2/pokemon/?offset=251&limit=135",gen:"III",offset:251},{url:"https://pokeapi.co/api/v2/pokemon/?offset=386&limit=107",gen:"IV",offset:386},{url:"https://pokeapi.co/api/v2/pokemon/?offset=493&limit=156",gen:"V",offset:493},{url:"https://pokeapi.co/api/v2/pokemon/?offset=649&limit=72",gen:"VI",offset:649},{url:"https://pokeapi.co/api/v2/pokemon/?offset=721&limit=88",gen:"VII",offset:721},{url:"https://pokeapi.co/api/v2/pokemon/?offset=809&limit=96",gen:"VIII",offset:809},{url:"https://pokeapi.co/api/v2/pokemon/?offset=905&limit=105",gen:"IX",offset:905}],n=t[0];function o(){return t}function a(t){e=[],n=t;$(document.querySelector(".pokemon-list")).html(""),d().then(function(){e.forEach(function(e){h(e)})})}function i(e){let t=Math.floor(e/=3),n=e-t;return 0===n?n=0:n<.5?n=4:n>.5&&(n=8),t+" ft, "+n+" in"}function l(e){return Math.round(e/.4535)/10+" lbs"}function r(){console.log("Loading..."),console.time("Rendered")}function s(){console.timeEnd("Rendered")}function p(t){"object"==typeof t&&"name"in t&&"detailsUrl"in t&&"id"in t?e.push(t):console.log("pokemon cannot be pushed to pokemonList")}function d(){return r(),fetch(n.url).then(function(e){return e.json()}).then(function(e){let t=n.offset+1;e.results.forEach(function(e){p({name:e.name,detailsUrl:e.url,id:t}),t+=1}),s()}).catch(function(e){s(),console.error(e)})}function c(){return e}function m(e){return r(),fetch(e.detailsUrl).then(function(e){return e.json()}).then(function(t){e.imageUrl=t.sprites.front_default,e.id=t.id,e.height=t.height,e.weight=t.weight,e.types=t.types,2===t.types.length?(e.types[0]=t.types[0].type.name,e.types[1]=t.types[1].type.name):e.types[0]=t.types[0].type.name,s()}).catch(function(e){s(),console.error(e)})}function f(e){m(e).then(function(){$(document.querySelector("body")).addClass("modal-open"),console.log(e);let t=document.querySelector(".modal-container");$(t).addClass("modal show").attr("aria-labelledby","Pokemon details").attr("aria-hidden","true").attr("role","dialog").attr("aria-modal","true").attr("style","display: block;").html("");let n=document.createElement("div");$(n).attr("role","document").addClass("modal-dialog");let o=document.createElement("div");$(o).addClass("modal-content");let a=document.createElement("button");$(a).addClass("modal-close close").attr("data-dismiss","modal").attr("aria-label","close").attr("type","button").on("click",function(){u(),$(t).removeClass("show").removeAttr("aria-modal").attr("style","display: none;")});let r=document.createElement("span");$(r).attr("aria-hidden","true").text("Close");let s=document.createElement("h1");s.innerText=`${e.name.charAt(0).toUpperCase()}${e.name.slice(1)} #${e.id}`;let p=document.createElement("img");p.src=e.imageUrl;let d=document.createElement("p");e.types.length>1?d.innerText=`Height:
                ${i(e.height)}

                Weight:
                ${l(e.weight)}

                Types:
                ${e.types[0]},
                ${e.types[1]}`:d.innerText=`Height:
                ${i(e.height)}

                Weight:
                ${l(e.weight)}

                Type:
                ${e.types[0]}
                `,a.appendChild(r),o.appendChild(a),o.appendChild(s),o.appendChild(p),o.appendChild(d),n.appendChild(o),t.appendChild(n),t.addEventListener("click",function(e){e.target===t&&u()})})}function u(){$(document.querySelector(".modal-container")).html("");$(document.querySelector(".modal-backdrop")).remove();$(document.querySelector("body")).removeAttr("class")}function h(e){let t=document.querySelector(".pokemon-list"),n=document.createElement("li"),o=document.createElement("button");o.innerText=`#${e.id} ${e.name.charAt(0).toUpperCase()}${e.name.slice(1)}`,$(o).addClass("list-button btn btn-primary").attr("type","button").attr("data-toggle","modal").attr("data-target",".modal-container"),o.addEventListener("click",function(){f(e)}),$(n).addClass("list-group-item"),n.appendChild(o),t.appendChild(n)}return window.addEventListener("keydown",function(e){let t=document.querySelector(".modal-container");"Escape"===e.key&&t.classList.contains("show")&&u()}),{getAllApi:o,addNavItem:function e(t){let o=document.querySelector(".navbar-nav"),i=document.createElement("li"),l=document.createElement("button");if($(l).addClass("nav-link btn btn-link").text(`Gen. ${t.gen} Pok\xe9mon`).on("click",function(){$(document.querySelector("span.sr-only")).remove(),a(t);let e=document.createElement("span");$(e).addClass("sr-only").text("(current)"),l.appendChild(e)}),n.offset===t.offset){let r=document.createElement("span");$(r).addClass("sr-only").text("(current)"),l.appendChild(r)}$(i).addClass("nav-item"),i.appendChild(l),o.appendChild(i)},changeApi:a,showLoadingMessage:r,hideLoadingMessage:s,add:p,loadList:d,getAllPokemon:c,loadDetails:m,showDetails:f,hideDetails:u,addListItem:h}}();pokemonRepository.getAllApi().forEach(function(e){pokemonRepository.addNavItem(e)}),pokemonRepository.loadList().then(function(){pokemonRepository.getAllPokemon().forEach(function(e){pokemonRepository.addListItem(e)})});